---
import { SUPPORTED, langLabel, t } from "../lib/i18n";

const { lang, pathname } = Astro.props;
const c = t(lang);

function swapLang(target) {
  const parts = (pathname || "/").split("/").filter(Boolean); // ["nl","werkwijze"]
  if (parts.length === 0) return `/${target}/`;
  // eerste segment is de huidige lang in onze routing
  parts[0] = target;
  return `/${parts.join("/")}/`;
}
---
<div class="badge" aria-label={c.common.languageSwitcherLabel}>
  <span class="badge-dot" aria-hidden="true"></span>
  {SUPPORTED.map((L) => (
    <a
      href={swapLang(L)}
      style={`font-weight:${L === lang ? "850" : "650"}; opacity:${L === lang ? "1" : "0.75"}`}
      aria-current={L === lang ? "page" : undefined}
    >
      {langLabel(L)}
    </a>
  ))}
</div>
