---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { langFromParams, t, SUPPORTED } from "../../lib/i18n";

export const prerender = true;
export const getStaticPaths = () => SUPPORTED.map((lang) => ({ params: { lang } }));

const lang = langFromParams(Astro.params);
const c = t(lang);

const sent = Astro.url.searchParams.get("sent") === "1";
---
<BaseLayout title={`${c.contact.title} ? IDEX Praxis`} description={c.meta.desc} lang={lang}>
  <section class="section">
    <div class="container">
      <div class="card">
        <div class="kicker">{c.contact.kicker}</div>
        <h1 class="hero-title" style="margin-top:12px;">{c.contact.title}</h1>
        <p style="margin-top:14px;">{c.contact.intro}</p>
        {sent ? (
          <div class="badge" style="margin-top:14px;">
            <span class="badge-dot"></span>
            <span style="font-weight:750;">{c.contact.formSuccess}</span>
          </div>
        ) : null}

        <div class="split" style="margin-top:18px;">
          <div class="card" style="box-shadow:none;">
            <h3>{c.contact.company}</h3>
            <p style="margin-top:10px;">
              {c.contact.address.map((line) => (<>{line}<br /></>))}
            </p>

            <div style="margin-top:14px;" class="badge">
              <span class="badge-dot"></span>
              <a href={`tel:${c.contact.phoneTel}`} style="font-weight:850;">{c.contact.phoneLabel}</a>
            </div>

            <div style="margin-top:10px;" class="badge">
              <span class="badge-dot"></span>
              <a href={`mailto:${c.contact.email}`} style="font-weight:850;">{c.contact.email}</a>
            </div>

            <p style="margin-top:14px; opacity:.78;">
              {c.contact.kvk}<br />
              {c.contact.btw}
            </p>
          </div>

          <div class="card" style="box-shadow:none;">
            <h3>{c.contact.formTitle}</h3>
            <p style="margin-top:10px; opacity:.85;">{c.contact.formNote}</p>

            <form action="/api/contact/" method="post" style="margin-top:14px; display:grid; gap:10px;">
              <input type="hidden" name="lang" value={lang} />
              <input name="name" placeholder={c.contact.formPlaceholders.name} class="btn" style="border-radius:14px; justify-content:flex-start;" />
              <input name="email" placeholder={c.contact.formPlaceholders.email} class="btn" style="border-radius:14px; justify-content:flex-start;" />
              <textarea name="message" placeholder={c.contact.formPlaceholders.message} rows="6"
                class="btn" style="border-radius:14px; justify-content:flex-start; padding:12px 14px; line-height:1.4;"></textarea>
              <button type="submit" class="btn btn-primary">{c.contact.formSubmit}</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
